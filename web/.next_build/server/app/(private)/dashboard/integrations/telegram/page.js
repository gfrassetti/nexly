(()=>{var e={};e.id=436,e.ids=[436],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},70225:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>d});var t=s(3003),r=s(14293),n=s(66550),l=s.n(n),c=s(86979),i={};for(let e in c)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>c[e]);s.d(a,i);let d=["",{children:["(private)",{children:["dashboard",{children:["integrations",{children:["telegram",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,17814)),"C:\\Users\\Guido\\Desktop\\Guido\\Nexly\\web\\src\\app\\(private)\\dashboard\\integrations\\telegram\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,77173)),"C:\\Users\\Guido\\Desktop\\Guido\\Nexly\\web\\src\\app\\(private)\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,1338)),"C:\\Users\\Guido\\Desktop\\Guido\\Nexly\\web\\src\\app\\(private)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,52075,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,37973)),"C:\\Users\\Guido\\Desktop\\Guido\\Nexly\\web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,52075,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["C:\\Users\\Guido\\Desktop\\Guido\\Nexly\\web\\src\\app\\(private)\\dashboard\\integrations\\telegram\\page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/(private)/dashboard/integrations/telegram/page",pathname:"/dashboard/integrations/telegram",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},82491:(e,a,s)=>{Promise.resolve().then(s.bind(s,15307))},15307:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>v});var t=s(68819),r=s(17266),n=s(35047),l=s(86333),c=s(77506),i=s(41291),d=s(50113),o=s(18069),m=s(62881);let x=(0,m.Z)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),u=(0,m.Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var h=s(40617);let p=(0,m.Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),g=(0,m.Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var j=s(74131);function b({integration:e,onDisconnect:a}){let{token:s}=(0,j.a)(),[n,l]=(0,r.useState)([]),[i,m]=(0,r.useState)(null),[b,v]=(0,r.useState)([]),[N,f]=(0,r.useState)(!1),[y,w]=(0,r.useState)(!1),[k,C]=(0,r.useState)(!1),G=async()=>{f(!0);try{let e=await (0,o.SC)("/telegram/chats",{},s||void 0);e.success?l(e.chats||[]):d.C.error("Error cargando chats")}catch(e){console.error("Error cargando chats:",e),d.C.error("Error cargando chats")}finally{f(!1)}},P=async e=>{w(!0);try{let a=await (0,o.SC)(`/telegram/messages/${e}?limit=20`,{},s||void 0);a.success?v(a.messages||[]):d.C.error("Error cargando mensajes")}catch(e){console.error("Error cargando mensajes:",e),d.C.error("Error cargando mensajes")}finally{w(!1)}},E=async()=>{if(confirm("\xbfEst\xe1s seguro de que quieres desconectar Telegram? Esto eliminar\xe1 el acceso a todos tus chats.")){C(!0);try{(await (0,o.SC)("/telegram/disconnect",{method:"DELETE"},s||void 0)).success?(d.C.success("Telegram desconectado exitosamente"),a?.()):d.C.error("Error desconectando Telegram")}catch(e){console.error("Error desconectando:",e),d.C.error("Error desconectando Telegram")}finally{C(!1)}}},T=e=>{m(e),P(e.id)},M=e=>{switch(e){case"private":default:return(0,t.jsx)(x,{className:"w-4 h-4"});case"group":case"supergroup":return(0,t.jsx)(u,{className:"w-4 h-4"});case"channel":return(0,t.jsx)(h.Z,{className:"w-4 h-4"})}},Z=e=>{switch(e){case"private":return"Privado";case"group":return"Grupo";case"supergroup":return"Supergrupo";case"channel":return"Canal";default:return"Chat"}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-neutral-800 rounded-lg p-6 border border-neutral-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center mr-4",children:(0,t.jsx)(h.Z,{className:"w-6 h-6 text-accent-cream"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-accent-cream",children:e.name}),(0,t.jsx)("p",{className:"text-neutral-400",children:e.meta.telegramUsername?`@${e.meta.telegramUsername}`:e.meta.telegramPhoneNumber})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${e.meta.isActive?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:e.meta.isActive?"Activo":"Inactivo"}),(0,t.jsx)("button",{onClick:E,disabled:k,className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors duration-200 disabled:opacity-50",children:k?(0,t.jsx)(c.Z,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(p,{className:"w-5 h-5"})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-neutral-400",children:"ID de Usuario:"}),(0,t.jsx)("p",{className:"text-accent-cream font-mono",children:e.meta.telegramUserId})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-neutral-400",children:"Nombre:"}),(0,t.jsxs)("p",{className:"text-accent-cream",children:[e.meta.telegramFirstName," ",e.meta.telegramLastName]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-neutral-400",children:"Tel\xe9fono:"}),(0,t.jsx)("p",{className:"text-accent-cream",children:e.meta.telegramPhoneNumber})]})]})]}),(0,t.jsxs)("div",{className:"bg-neutral-800 rounded-lg border border-neutral-700",children:[(0,t.jsx)("div",{className:"p-4 border-b border-neutral-700",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-accent-cream",children:"Tus Chats"}),(0,t.jsx)("button",{onClick:G,disabled:N,className:"p-2 text-neutral-400 hover:text-accent-cream hover:bg-neutral-700 rounded-lg transition-colors duration-200 disabled:opacity-50",children:N?(0,t.jsx)(c.Z,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(g,{className:"w-5 h-5"})})]})}),(0,t.jsx)("div",{className:"max-h-96 overflow-y-auto",children:N?(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsx)(c.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-400"}),(0,t.jsx)("p",{className:"text-neutral-400",children:"Cargando chats..."})]}):0===n.length?(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsx)(h.Z,{className:"w-12 h-12 mx-auto mb-4 text-neutral-600"}),(0,t.jsx)("p",{className:"text-neutral-400",children:"No se encontraron chats"})]}):(0,t.jsx)("div",{className:"divide-y divide-neutral-700",children:n.map(e=>(0,t.jsx)("button",{onClick:()=>T(e),className:`w-full p-4 text-left hover:bg-neutral-700 transition-colors duration-200 ${i?.id===e.id?"bg-neutral-700":""}`,children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center mr-3",children:M(e.type)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-accent-cream font-medium truncate",children:e.title||`Chat ${e.id}`}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-neutral-400",children:[(0,t.jsx)("span",{children:Z(e.type)}),e.username&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:["@",e.username]})]})]})]})]})},e.id))})})]}),i&&(0,t.jsxs)("div",{className:"bg-neutral-800 rounded-lg border border-neutral-700",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-neutral-700",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-accent-cream",children:i.title||`Chat ${i.id}`}),(0,t.jsxs)("p",{className:"text-sm text-neutral-400",children:[Z(i.type),i.username&&` • @${i.username}`]})]}),(0,t.jsx)("div",{className:"max-h-96 overflow-y-auto p-4",children:y?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(c.Z,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-blue-400"}),(0,t.jsx)("p",{className:"text-neutral-400",children:"Cargando mensajes..."})]}):0===b.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(x,{className:"w-12 h-12 mx-auto mb-4 text-neutral-600"}),(0,t.jsx)("p",{className:"text-neutral-400",children:"No hay mensajes en este chat"})]}):(0,t.jsx)("div",{className:"space-y-3",children:b.map(e=>(0,t.jsxs)("div",{className:`p-3 rounded-lg ${e.isOutgoing?"bg-blue-500/20 ml-8":"bg-neutral-700 mr-8"}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-xs text-neutral-400",children:e.isOutgoing?"T\xfa":"Otro"}),(0,t.jsx)("span",{className:"text-xs text-neutral-500",children:new Date(e.date).toLocaleString()})]}),(0,t.jsx)("p",{className:"text-accent-cream text-sm",children:e.text||"[Mensaje sin texto]"})]},e.id))})})]})]})}function v(){let e=(0,n.useRouter)(),[a,s]=(0,r.useState)(null),[o,m]=(0,r.useState)(!0),[x,u]=(0,r.useState)(null);return o?(0,t.jsx)("div",{className:"min-h-screen bg-accent-dark p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center text-neutral-400 hover:text-accent-cream transition-colors duration-200 mb-6",children:[(0,t.jsx)(l.Z,{className:"w-5 h-5 mr-2"}),"Volver"]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-accent-cream mb-2",children:"Gestionar Telegram"})]}),(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(c.Z,{className:"w-12 h-12 animate-spin mx-auto mb-4 text-blue-400"}),(0,t.jsx)("p",{className:"text-neutral-400",children:"Cargando integraci\xf3n de Telegram..."})]})})]})}):x||!a?(0,t.jsx)("div",{className:"min-h-screen bg-accent-dark p-6",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center text-neutral-400 hover:text-accent-cream transition-colors duration-200 mb-6",children:[(0,t.jsx)(l.Z,{className:"w-5 h-5 mr-2"}),"Volver"]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-accent-cream mb-2",children:"Gestionar Telegram"})]}),(0,t.jsxs)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-8",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)(i.Z,{className:"w-8 h-8 text-red-400 mr-4"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-red-400 mb-1",children:x?"Error cargando Telegram":"Telegram no conectado"}),(0,t.jsx)("p",{className:"text-red-300",children:x||"No tienes una integraci\xf3n de Telegram activa. Conecta tu cuenta para comenzar."})]})]}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("button",{onClick:()=>e.push("/dashboard/integrations/connect/telegram"),className:"bg-blue-500 hover:bg-blue-600 text-accent-cream font-medium py-2 px-6 rounded-lg transition-colors duration-200",children:"Conectar Telegram"}),(0,t.jsx)("button",{onClick:()=>e.push("/dashboard/integrations"),className:"bg-neutral-600 hover:bg-neutral-700 text-accent-cream font-medium py-2 px-6 rounded-lg transition-colors duration-200",children:"Ver todas las integraciones"})]})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-accent-dark p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center text-neutral-400 hover:text-accent-cream transition-colors duration-200 mb-6",children:[(0,t.jsx)(l.Z,{className:"w-5 h-5 mr-2"}),"Volver"]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-accent-cream mb-2",children:"Gestionar Telegram"}),(0,t.jsx)("p",{className:"text-neutral-400",children:"Gestiona todos tus chats y mensajes de Telegram desde una sola plataforma."})]}),(0,t.jsx)(b,{integration:a,onDisconnect:()=>{s(null),d.C.success("Telegram desconectado exitosamente"),e.push("/dashboard/integrations")}})]})})}},17814:(e,a,s)=>{"use strict";s.a(e,async(e,t)=>{try{s.r(a),s.d(a,{default:()=>e});var r=s(71851);let e=(await (0,r.createProxy)(String.raw`C:\Users\Guido\Desktop\Guido\Nexly\web\src\app\(private)\dashboard\integrations\telegram\page.tsx`)).default;t()}catch(e){t(e)}},1)}};var a=require("../../../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[147,426,752,224,962,148,737],()=>s(70225));module.exports=t})();