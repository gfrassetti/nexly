exports.id=148,exports.ids=[148],exports.modules={50084:(e,r,t)=>{Promise.resolve().then(t.bind(t,96012))},35303:()=>{},96012:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h});var a=t(68819),s=t(90434),n=t(35047),i=t(21120);let l=[{id:"resumen",label:"Resumen",href:"/dashboard"},{id:"inbox",label:"Inbox",href:"/dashboard/inbox"},{id:"contacts",label:"Contactos",href:"/dashboard/contacts"},{id:"integrations",label:"Integraciones",href:"/dashboard/integrations"},{id:"subscription",label:"Mi Suscripci\xf3n",href:"/dashboard/subscription"}];function c(){let e=(0,n.usePathname)();return(0,a.jsxs)("aside",{className:"h-screen sticky top-0 border-r border-neutral-800 p-4 flex flex-col gap-4",children:[(0,a.jsx)("div",{className:"px-2 py-2",children:(0,a.jsx)(i.Z,{size:"md",className:"h-[4rem]"})}),l.map(r=>(0,a.jsx)(s.default,{href:r.href,className:`w-full text-left px-4 py-2 rounded-lg transition ${e===r.href?"bg-neutral-700":"hover:bg-neutral-800"}`,children:r.label},r.id))]})}var o=t(74131),d=t(83640),u=t(17266);let p=[{id:"resumen",label:"Resumen",href:"/dashboard"},{id:"inbox",label:"Inbox",href:"/dashboard/inbox"},{id:"contacts",label:"Contactos",href:"/dashboard/contacts"},{id:"integrations",label:"Integraciones",href:"/dashboard/integrations"},{id:"subscription",label:"Mi Suscripci\xf3n",href:"/dashboard/subscription"}];function m(){let{user:e,logout:r}=(0,o.a)(),{subscription:t,status:i}=(0,d.mU)();(0,n.useRouter)();let l=(0,n.usePathname)(),[c,m]=(0,u.useState)(!1),x=()=>{if(!t?.subscription)return null;let e=t.subscription,r=e.status,s="",n="";return e.stripeSubscriptionId?(s="crecimiento"===e.planType?"Crecimiento":"pro"===e.planType?"Pro":"Business",n="pro"===e.planType?"bg-accent-dark text-accent-cream border border-accent-dark/30":"business"===e.planType?"bg-purple-600 text-white border border-purple-600/30":"text-accent-green border border-accent-green/30"):"trialing"===r?(s=`${"crecimiento"===e.planType?"Crecimiento":"pro"===e.planType?"Pro":"Business"} Trial`,n="pro"===e.planType?"bg-accent-dark text-accent-cream border border-accent-dark/30":"business"===e.planType?"bg-purple-600 text-white border border-purple-600/30":"text-accent-blue border border-accent-blue/30"):"active"===r?(s="crecimiento"===e.planType?"Crecimiento":"pro"===e.planType?"Pro":"Business",n="pro"===e.planType?"bg-accent-dark text-accent-cream border border-accent-dark/30":"business"===e.planType?"bg-purple-600 text-white border border-purple-600/30":"text-accent-green border border-accent-green/30"):"paused"===r?(s=`${"crecimiento"===e.planType?"Crecimiento":"pro"===e.planType?"Pro":"Business"} (Pausado)`,n="pro"===e.planType?"bg-accent-dark text-accent-cream border border-accent-dark/30":"business"===e.planType?"bg-purple-600 text-white border border-purple-600/30":"text-accent-cream border border-accent-cream/30"):"past_due"===r||"unpaid"===r?(s=`${"crecimiento"===e.planType?"Crecimiento":"pro"===e.planType?"Pro":"Business"} (Gracia)`,n="pro"===e.planType?"bg-accent-dark text-accent-cream border border-accent-dark/30":"business"===e.planType?"bg-purple-600 text-white border border-purple-600/30":"text-warning border border-warning/30"):(s="canceled"===r?`${"crecimiento"===e.planType?"Crecimiento":"pro"===e.planType?"Pro":"Business"} (Cancelado)`:"crecimiento"===e.planType?"Crecimiento":"pro"===e.planType?"Pro":"Business",n="pro"===e.planType?"bg-accent-dark text-accent-cream border border-accent-dark/30":"business"===e.planType?"bg-purple-600 text-white border border-purple-600/30":"text-muted-foreground border border-border"),(0,a.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium bg-transparent ${n}`,children:s})},b=()=>{if(!t?.subscription)return null;let e=t.subscription;if(!(e.trialEndDate&&new Date(e.trialEndDate)>new Date))return null;let r=new Date(e.trialEndDate),s=new Date,n=Math.max(0,Math.ceil((r.getTime()-s.getTime())/864e5)),i=new Date(r.getTime()-6048e5),l=Math.min(Math.max(0,Math.ceil((s.getTime()-i.getTime())/864e5))/7*100,100);return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-16 h-1 bg-neutral-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-accent-blue transition-all duration-300",style:{width:`${Math.min(l,100)}%`}})}),(0,a.jsxs)("span",{className:"text-xs text-neutral-400",children:[n,"d restantes"]})]})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("header",{className:"h-12 flex items-center justify-between px-4 bg-accent-dark border-b border-neutral-700",children:[(0,a.jsx)("button",{onClick:()=>m(!c),className:"lg:hidden p-2 rounded-md hover:bg-neutral-800 transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-neutral-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,a.jsx)("div",{className:"hidden lg:block text-sm text-neutral-300",children:"Panel"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"hidden sm:block text-sm text-neutral-300",children:["Hola, ",e.username]}),(0,a.jsxs)("div",{className:"hidden md:flex items-center gap-2",children:[x(),b()]})]}),(0,a.jsxs)("button",{onClick:()=>{r()},className:"px-2 sm:px-3 py-1 rounded bg-neutral-800 hover:bg-neutral-700 text-xs sm:text-sm transition-colors duration-200",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Salir"}),(0,a.jsx)("svg",{className:"w-4 h-4 sm:hidden",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})]})]})]}),c&&(0,a.jsx)("div",{className:"lg:hidden bg-neutral-800 border-b border-neutral-700",children:(0,a.jsxs)("nav",{className:"px-4 py-2 space-y-1",children:[p.map(e=>(0,a.jsx)(s.default,{href:e.href,onClick:()=>m(!1),className:`block px-3 py-2 rounded-lg text-sm transition-colors ${l===e.href?"bg-neutral-700 text-accent-cream":"text-neutral-300 hover:bg-neutral-700"}`,children:e.label},e.id)),e&&(0,a.jsxs)("div",{className:"px-3 py-2 border-t border-neutral-700 mt-2 pt-2",children:[(0,a.jsxs)("div",{className:"text-xs text-neutral-400 mb-2",children:["Hola, ",e.username]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[x(),b()]})]})]})})]})}var x=t(28759);class b extends u.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){}render(){return this.state.hasError?this.props.fallback||(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-accent-dark",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("span",{className:"text-2xl text-red-600",children:"⚠️"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-accent-cream mb-2",children:"Algo sali\xf3 mal"}),(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:"Se ha producido un error inesperado"}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-nexly-teal hover:bg-nexly-green text-accent-cream font-semibold px-6 py-3 rounded-lg transition-colors duration-300",children:"Recargar p\xe1gina"})]})}):this.props.children}}function h({children:e}){return(0,a.jsx)(x.default,{requireAuth:!0,children:(0,a.jsx)(d.qR,{children:(0,a.jsx)(b,{children:(0,a.jsxs)("div",{className:"min-h-screen flex flex-col lg:grid lg:grid-cols-[260px_1fr] bg-accent-dark text-neutral-100",children:[(0,a.jsx)("div",{className:"hidden lg:block",children:(0,a.jsx)(c,{})}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 lg:col-start-2",children:[(0,a.jsx)(m,{}),(0,a.jsx)("main",{className:"flex-1 overflow-auto p-2 sm:p-4",children:e})]})]})})})})}},28759:(e,r,t)=>{"use strict";t.d(r,{default:()=>l});var a=t(68819);t(17266);var s=t(35047),n=t(74131),i=t(94224);function l({children:e,requireAuth:r=!0}){(0,s.useRouter)();let{token:t,user:l,clear:c,isLoading:o}=(0,n.a)(),d=!!(t&&l);return o?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-accent-dark",children:(0,a.jsx)(i.ZP,{size:"lg",text:"Verificando autenticaci\xf3n..."})}):r&&!d||!r&&d?null:(0,a.jsx)(a.Fragment,{children:e})}},94224:(e,r,t)=>{"use strict";t.d(r,{ZP:()=>n});var a=t(68819),s=t(46226);function n({size:e="md",text:r,fullScreen:t=!1,className:n=""}){let i={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24"},l={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},c={sm:"border-2",md:"border-[3px]",lg:"border-4",xl:"border-[5px]"},o=()=>(0,a.jsxs)("div",{className:`flex flex-col items-center justify-center gap-4 ${n}`,children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:`
            ${i[e]} 
            ${c[e]}
            rounded-full 
            border-transparent
            border-t-nexly-green 
            border-r-nexly-teal
            animate-spin
            shadow-nexly-green/30
          `,style:{animationDuration:"1s",animationTimingFunction:"linear"}}),(0,a.jsx)("div",{className:`
          ${i[e]} 
          rounded-full 
          absolute top-0 left-0 
          flex items-center justify-center
          bg-gradient-to-br from-nexly-green/10 to-nexly-teal/10
        `,children:(0,a.jsx)(s.default,{src:"/logo_single.png",alt:"Nexly",width:48,height:48,className:`${l[e]} object-contain animate-pulse`,priority:!0})})]}),r&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-accent-cream font-medium text-sm tracking-wide mb-2",children:r}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1.5",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-nexly-green rounded-full animate-bounce shadow-lg shadow-nexly-green/50"}),(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-nexly-teal rounded-full animate-bounce shadow-lg shadow-nexly-teal/50",style:{animationDelay:"0.15s"}}),(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-nexly-green rounded-full animate-bounce shadow-lg shadow-nexly-green/50",style:{animationDelay:"0.3s"}})]})]})]});return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-neutral-900 via-neutral-800 to-neutral-900 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,a.jsx)(o,{})}):(0,a.jsx)(o,{})}},21120:(e,r,t)=>{"use strict";t.d(r,{Z:()=>n});var a=t(68819),s=t(90434);function n({href:e="/",className:r="",showText:t=!1,textClassName:n="text-xl font-bold",size:i="md"}){let l=(0,a.jsxs)("div",{className:`flex items-center gap-3 ${r}`,children:[(0,a.jsx)("div",{className:`${{sm:"w-24",md:"w-32",lg:"w-40"}[i]} flex items-center justify-center`,children:(0,a.jsx)("img",{src:"/logo_nexly.png",alt:"Nexly Logo",className:"w-full h-full object-contain"})}),t&&(0,a.jsx)("span",{className:`${n}`,children:"Nexly"})]});return e?(0,a.jsx)(s.default,{href:e,className:"inline-block hover:opacity-80 transition-opacity duration-300",children:l}):l}},83640:(e,r,t)=>{"use strict";t.d(r,{f4:()=>o,mU:()=>c,qR:()=>l});var a=t(68819),s=t(17266),n=t(74131);let i=(0,s.createContext)(void 0);function l({children:e}){let{token:r}=(0,n.a)(),[t,l]=(0,s.useState)(null),[c,o]=(0,s.useState)(!0),[d,u]=(0,s.useState)(null),p=(0,s.useCallback)(async()=>{if(!r){o(!1);return}try{o(!0),u(null),console.log("\uD83D\uDD04 Fetching subscription status...");let e=await fetch(`https://nexly-production.up.railway.app/subscriptions/status?t=${Date.now()}`,{headers:{Authorization:`Bearer ${r}`,"Cache-Control":"no-cache"}});if(!e.ok)throw Error(`Error ${e.status}: ${e.statusText}`);let t=await e.json();console.log("\uD83D\uDCCA Subscription data received:",t),l(t),t.hasSubscription&&t.subscription?.planType?(localStorage.setItem("selectedPlan",t.subscription.planType),localStorage.setItem("hasActiveSubscription","true")):(localStorage.removeItem("selectedPlan"),localStorage.removeItem("hasActiveSubscription"))}catch(e){console.error("❌ Error fetching subscription:",e),l({hasSubscription:!1}),u(e instanceof Error?e.message:"Error desconocido"),localStorage.removeItem("hasActiveSubscription")}finally{o(!1)}},[r]),m=(0,s.useMemo)(()=>{if(!t)return{isPaid:!1,isTrial:!1,isFree:!0,active:!1,trialActive:!1,pendingPaymentMethod:!1,paused:!1,cancelled:!1,pastDue:!1,incomplete:!1};let e=t.hasSubscription,r=t.userSubscriptionStatus,a=t.subscription?.status,s="active_paid"===r||"active"===a,n="active_trial"===r||"trialing"===a;return{isPaid:!!s,isTrial:!!n,isFree:!(s||n)||!e,active:!!s,trialActive:!!n,pendingPaymentMethod:"trial_pending_payment_method"===r,paused:"paused"===a,cancelled:"canceled"===a,pastDue:"past_due"===a,incomplete:!!("incomplete"===a||"incomplete_expired"===a)}},[t]),x=(0,s.useCallback)(e=>{if(!t?.hasSubscription)return!1;let r=t.subscription?.planType;return!!r&&(({crecimiento:["whatsapp","instagram","telegram"],pro:["whatsapp","instagram","messenger","telegram"],business:["whatsapp","instagram","messenger","telegram","tiktok","twitter"]})[r]?.includes(e)||!1)},[t]),b=(0,s.useCallback)(()=>{if(!t?.hasSubscription)return 0;switch(t.subscription?.planType){case"crecimiento":return 3;case"pro":return 4;case"business":return 999;default:return 0}},[t]),h=(0,s.useCallback)(e=>{l(e),u(null),e.hasSubscription&&e.subscription?.planType&&(localStorage.setItem("selectedPlan",e.subscription.planType),localStorage.setItem("hasActiveSubscription","true"))},[]),g=(0,s.useCallback)(async()=>{console.log("\uD83D\uDD04 Forcing subscription context refresh..."),await p()},[p]),f=(0,s.useMemo)(()=>({subscription:t,loading:c,error:d,status:m,refetch:p,canUseFeature:x,getMaxIntegrations:b,updateAfterPayment:h,forceRefresh:g}),[t,c,d,m,p,x,b,h,g]);return(0,a.jsx)(i.Provider,{value:f,children:e})}function c(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useSubscription must be used within a SubscriptionProvider");return e}function o(){return(0,s.useContext)(i)}},77173:(e,r,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{default:()=>e});var s=t(71851);let e=(await (0,s.createProxy)(String.raw`C:\Users\Guido\Desktop\Guido\Nexly\web\src\app\(private)\dashboard\layout.tsx`)).default;a()}catch(e){a(e)}},1)},1338:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});var a=t(89351);function s({children:e}){return(0,a.jsx)(a.Fragment,{children:e})}},73881:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});var a=t(40771);let s=e=>[{type:"image/x-icon",sizes:"239x254",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};