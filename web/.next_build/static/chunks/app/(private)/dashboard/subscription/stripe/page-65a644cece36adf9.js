(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1207],{74391:(e,t,r)=>{Promise.resolve().then(r.bind(r,40390))},77616:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});let s=r(2265);function a(e,t){let r=(0,s.useRef)(()=>{}),a=(0,s.useRef)(()=>{});return(0,s.useMemo)(()=>e&&t?s=>{null===s?(r.current(),a.current()):(r.current=n(e,s),a.current=n(t,s))}:e||t,[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},60291:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return s}});let s=r(99920)._(r(2265)).default.createContext(null)},40390:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var s=r(57437),a=r(2265),n=r(12104),i=r(67048),o=r(11870);function c(){let{user:e}=(0,i.a)(),[t,r]=(0,a.useState)(!1),[s,n]=(0,a.useState)(null);return{loading:t,error:s,handleOpenPortal:async()=>{if(!e){n("Usuario no autenticado");return}r(!0),n(null);try{let t=await fetch("/api/stripe/update-payment-method",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:e.id})}),r=await t.json();r.url?window.location.href=r.url:n("No se pudo abrir el portal de pagos.")}catch(e){n("Error de conexi\xf3n al abrir el portal de pagos."),console.error("Error al abrir portal:",e)}finally{r(!1)}},cancelSubscription:async e=>{r(!0),n(null);try{let t=await fetch("/api/stripe/cancel-subscription",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscriptionId:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Error al cancelar la suscripci\xf3n")}return await t.json()}catch(e){throw n(e instanceof Error?e.message:"Error al cancelar la suscripci\xf3n"),console.error("Error al cancelar suscripci\xf3n:",e),e}finally{r(!1)}},pauseSubscription:async e=>{r(!0),n(null);try{let t=await fetch("/api/stripe/pause-subscription",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscriptionId:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Error al pausar la suscripci\xf3n")}return await t.json()}catch(e){throw n(e instanceof Error?e.message:"Error al pausar la suscripci\xf3n"),console.error("Error al pausar suscripci\xf3n:",e),e}finally{r(!1)}},resumeSubscription:async e=>{r(!0),n(null);try{let t=await fetch("/api/stripe/resume-subscription",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscriptionId:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Error al reanudar la suscripci\xf3n")}return await t.json()}catch(e){throw n(e instanceof Error?e.message:"Error al reanudar la suscripci\xf3n"),console.error("Error al reanudar suscripci\xf3n:",e),e}finally{r(!1)}},clearError:()=>n(null)}}function d(){let{token:e}=(0,i.a)(),[t,r]=(0,a.useState)([]),[s,n]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{e&&(async()=>{try{n(!0),c(null);let t=await fetch("".concat("https://nexly-production.up.railway.app","/stripe/invoices"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok)throw Error("Error ".concat(t.status,": ").concat(t.statusText));let s=await t.json();r(s.invoices||[])}catch(e){console.error("Error fetching invoices:",e),c(e.message||"Error al cargar las facturas")}finally{n(!1)}})()},[e]),{invoices:t,loading:s,error:o,refetch:()=>{e&&(n(!0),c(null),r([]))}}}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"usd";return new Intl.NumberFormat("es-ES",{style:"currency",currency:t.toUpperCase()}).format(e/100)},u=e=>new Date(1e3*e).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),m=e=>({draft:"Borrador",open:"Pendiente",paid:"Pagada",void:"Anulada",uncollectible:"No cobrable"})[e]||e,x=e=>({draft:"bg-gray-100 text-gray-800",open:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",void:"bg-red-100 text-red-800",uncollectible:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800";function p(){let{invoices:e,loading:t}=d(),r=(0,a.useMemo)(()=>{if(!e||0===e.length)return{totalInvoices:0,totalPaid:0,totalPending:0,averageAmount:0,lastInvoiceDate:null};let t=e.filter(e=>"paid"===e.status),r=e.filter(e=>"open"===e.status),s=t.reduce((e,t)=>e+t.total,0),a=r.reduce((e,t)=>e+t.amount_due,0),n=e.length>0?e.reduce((e,t)=>e+t.total,0)/e.length:0,i=e.sort((e,t)=>t.created-e.created)[0],o=i?new Date(1e3*i.created):null;return{totalInvoices:e.length,totalPaid:s,totalPending:a,averageAmount:n,lastInvoiceDate:o}},[e]);return t?(0,s.jsxs)("div",{className:"bg-muted border border-border rounded-lg",children:[(0,s.jsx)("div",{className:"p-6 border-b border-border",children:(0,s.jsx)("h2",{className:"text-sm font-medium text-foreground",children:"Estad\xedsticas de facturaci\xf3n"})}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-4 bg-background rounded w-16 mb-2"}),(0,s.jsx)("div",{className:"h-6 bg-background rounded w-20"})]},e))})})]}):0===r.totalInvoices?null:(0,s.jsxs)("div",{className:"bg-muted border border-border rounded-lg",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-border",children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-foreground",children:"Estad\xedsticas de facturaci\xf3n"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Resumen de tu actividad de facturaci\xf3n"})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-lg font-semibold text-foreground",children:r.totalInvoices}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total facturas"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-lg font-semibold text-accent-green",children:l(r.totalPaid)}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total pagado"})]}),r.totalPending>0&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-lg font-semibold text-accent-cream",children:l(r.totalPending)}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Pendiente"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-lg font-semibold text-accent-blue",children:l(r.averageAmount)}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Promedio"})]})]}),r.lastInvoiceDate&&(0,s.jsx)("div",{className:"mt-6 pt-6 border-t border-border",children:(0,s.jsxs)("div",{className:"flex items-center justify-center text-xs text-muted-foreground",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"\xdaltima factura: ",r.lastInvoiceDate.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]})})]})]})}function b(){var e,t,r;let{subscription:o,loading:c,error:d}=(0,n.mU)(),{user:l}=(0,i.a)(),u=(0,a.useMemo)(()=>{if(!(null==o?void 0:o.subscription))return"Plan desconocido";switch(o.subscription.planType){case"crecimiento":return"Plan Crecimiento";case"pro":return"Plan Pro";case"business":return"Plan Business";default:return"Plan B\xe1sico"}},[null==o?void 0:null===(e=o.subscription)||void 0===e?void 0:e.planType]),m=(0,a.useMemo)(()=>(null==o?void 0:o.subscription)?({trialing:"Prueba",active:"Activo",incomplete:"Incompleto",incomplete_expired:"Incompleto Expirado",past_due:"Vencido",canceled:"Cancelado",unpaid:"Impago",paused:"Pausado"})[o.subscription.status]||o.subscription.status:"Desconocido",[null==o?void 0:null===(t=o.subscription)||void 0===t?void 0:t.status]),x=(0,a.useMemo)(()=>(null==o?void 0:o.subscription)&&({trialing:"bg-transparent text-accent-blue border border-accent-blue/30",active:"bg-transparent text-accent-green border border-accent-green/30",incomplete:"bg-transparent text-warning border border-warning/30",incomplete_expired:"bg-transparent text-accent-red border border-accent-red/30",past_due:"bg-transparent text-accent-cream border border-accent-cream/30",canceled:"bg-transparent text-accent-red border border-accent-red/30",unpaid:"bg-transparent text-accent-red border border-accent-red/30",paused:"bg-transparent text-muted-foreground border border-border"})[o.subscription.status]||"bg-transparent text-muted-foreground border border-border",[null==o?void 0:null===(r=o.subscription)||void 0===r?void 0:r.status]),b=e=>e?new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}):"-";return c?(0,s.jsx)("div",{className:"max-w-2xl mx-auto space-y-6",children:(0,s.jsx)("div",{className:"bg-muted border border-border rounded-lg p-6",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,s.jsx)("div",{className:"h-4 bg-background rounded w-1/4"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"h-4 bg-background rounded"}),(0,s.jsx)("div",{className:"h-4 bg-background rounded w-3/4"}),(0,s.jsx)("div",{className:"h-4 bg-background rounded w-1/2"})]})]})})}):d?null:(null==o?void 0:o.subscription)?(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-muted border border-border rounded-lg",children:[(0,s.jsx)("div",{className:"p-6 border-b border-border",children:(0,s.jsx)("h2",{className:"text-sm font-medium text-foreground",children:"Facturaci\xf3n actual"})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Estado"}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-md text-xs font-medium ".concat(x),children:m})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Plan"}),(0,s.jsx)("span",{className:"font-medium text-sm text-foreground",children:u})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Monto"}),(0,s.jsx)("span",{className:"font-medium text-sm text-foreground",children:(null==o?void 0:o.subscription)?(("crecimiento"===o.subscription.planType?2999:4999)/100).toLocaleString("es-ES",{style:"currency",currency:"USD"}):"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Pr\xf3xima factura"}),(0,s.jsx)("span",{className:"font-medium text-sm text-foreground",children:b(o.subscription.trialEndDate)})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"M\xe9todo de pago"}),(0,s.jsx)("span",{className:"font-medium text-sm text-foreground",children:"M\xe9todo de pago configurado"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Email cliente"}),(0,s.jsx)("span",{className:"font-medium text-sm text-foreground",children:(null==l?void 0:l.email)||"-"})]}),(0,s.jsx)("div",{className:"border-t border-border pt-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"ID de suscripci\xf3n"}),(0,s.jsx)("span",{className:"font-mono text-xs text-muted-foreground",children:o.subscription.stripeSubscriptionId||o.subscription.id})]})})]})]}),(0,s.jsxs)("div",{className:"bg-muted border border-border rounded-lg",children:[(0,s.jsx)("div",{className:"p-6 border-b border-border",children:(0,s.jsx)("h2",{className:"text-sm font-medium text-foreground",children:"Detalles adicionales"})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Per\xedodo actual"}),(0,s.jsx)("span",{className:"font-medium text-sm text-foreground",children:b(o.subscription.currentPeriodStart)})]}),o.subscription.trialEndDate&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Fin de prueba"}),(0,s.jsx)("span",{className:"font-medium text-sm text-foreground",children:b(o.subscription.trialEndDate)})]}),o.subscription.isInGracePeriod&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Per\xedodo de gracia"}),(0,s.jsxs)("span",{className:"font-medium text-sm text-orange-400",children:[o.subscription.gracePeriodDaysRemaining," d\xedas restantes"]})]}),o.subscription.cancelledAt&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Cancelado el"}),(0,s.jsx)("span",{className:"font-medium text-sm text-foreground",children:b(o.subscription.cancelledAt)})]})]})]})]}),(0,s.jsx)(p,{})]}):(0,s.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,s.jsx)("div",{className:"bg-muted border border-border rounded-lg p-6",children:(0,s.jsx)("div",{className:"text-center text-muted-foreground",children:(0,s.jsx)("p",{className:"text-sm",children:"No hay suscripci\xf3n activa"})})})})}function g(e){let{className:t=""}=e,{invoices:r,loading:a,error:n}=d();return a?(0,s.jsxs)("div",{className:"bg-muted border border-border rounded-lg ".concat(t),children:[(0,s.jsx)("div",{className:"p-6 border-b border-border",children:(0,s.jsx)("h2",{className:"text-sm font-medium text-foreground",children:"Historial de facturas"})}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center py-3 border-b border-border last:border-b-0",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-4 bg-background rounded w-32"}),(0,s.jsx)("div",{className:"h-3 bg-background rounded w-24"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-4 bg-background rounded w-20"}),(0,s.jsx)("div",{className:"h-3 bg-background rounded w-16"})]})]},e))})})]}):n?(0,s.jsxs)("div",{className:"bg-muted border border-border rounded-lg ".concat(t),children:[(0,s.jsx)("div",{className:"p-6 border-b border-border",children:(0,s.jsx)("h2",{className:"text-sm font-medium text-foreground",children:"Historial de facturas"})}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("svg",{className:"w-12 h-12 mx-auto text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsx)("p",{className:"text-sm",children:"Error al cargar las facturas"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:n})]})})]}):r&&0!==r.length?(0,s.jsxs)("div",{className:"bg-muted border border-border rounded-lg ".concat(t),children:[(0,s.jsxs)("div",{className:"p-6 border-b border-border",children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-foreground",children:"Historial de facturas"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[r.length," factura",1!==r.length?"s":""]})]}),(0,s.jsx)("div",{className:"divide-y divide-border",children:r.map(e=>(0,s.jsx)(h,{invoice:e},e.id))})]}):(0,s.jsxs)("div",{className:"bg-muted border border-border rounded-lg ".concat(t),children:[(0,s.jsx)("div",{className:"p-6 border-b border-border",children:(0,s.jsx)("h2",{className:"text-sm font-medium text-foreground",children:"Historial de facturas"})}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("svg",{className:"w-12 h-12 mx-auto text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,s.jsx)("p",{className:"text-sm",children:"No hay facturas disponibles"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Las facturas aparecer\xe1n aqu\xed una vez que comiences a usar el servicio"})]})})]})}function h(e){let{invoice:t}=e;return(0,s.jsx)("div",{className:"p-6 hover:bg-muted/50 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:t.number||"Factura ".concat(t.id.slice(-8))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:u(t.created)})]}),(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium ".concat(x(t.status)),children:m(t.status)})]}),t.description&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:t.description}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-muted-foreground",children:[(0,s.jsxs)("span",{children:["Per\xedodo: ",u(t.period_start)," - ",u(t.period_end)]}),t.customer_email&&(0,s.jsxs)("span",{children:["• ",t.customer_email]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-foreground",children:l(t.total,t.currency)}),t.amount_due>0&&t.amount_paid<t.total&&(0,s.jsxs)("p",{className:"text-xs text-accent-cream",children:["Pendiente: ",l(t.amount_due,t.currency)]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[t.hosted_invoice_url&&(0,s.jsxs)("button",{onClick:()=>{t.hosted_invoice_url&&window.open(t.hosted_invoice_url,"_blank")},className:"inline-flex items-center px-2 py-1 border border-border text-xs font-medium rounded-md text-foreground bg-muted hover:bg-muted/80 transition-colors",children:[(0,s.jsxs)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Ver"]}),t.invoice_pdf&&(0,s.jsxs)("button",{onClick:()=>{t.invoice_pdf&&window.open(t.invoice_pdf,"_blank")},className:"inline-flex items-center px-2 py-1 border border-border text-xs font-medium rounded-md text-foreground bg-muted hover:bg-muted/80 transition-colors",children:[(0,s.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"PDF"]})]})]})]})})}function f(e){let{subscriptionId:t,status:r,isPaused:n,onStatusChange:i}=e,{cancelSubscription:d,pauseSubscription:l,resumeSubscription:u,loading:m,error:x}=c(),{showSuccess:p,showError:b}=(0,o.w)(),[g,h]=(0,a.useState)(null),[f,v]=(0,a.useState)(!1),[j,N]=(0,a.useState)(!1),y=()=>{v(!0)},w=async()=>{v(!1),h("cancel");try{await d(t),p("\xc9xito","trialing"===r?"Per\xedodo de prueba cancelado exitosamente":"Suscripci\xf3n cancelada exitosamente"),null==i||i()}catch(e){b("Error","Error al cancelar la suscripci\xf3n")}finally{h(null)}},k=async()=>{N(!1),h("pause");try{await l(t),p("\xc9xito","Suscripci\xf3n pausada exitosamente"),null==i||i()}catch(e){b("Error","Error al pausar la suscripci\xf3n")}finally{h(null)}},S=async()=>{h("resume");try{await u(t),p("\xc9xito","Suscripci\xf3n reanudada exitosamente"),null==i||i()}catch(e){b("Error","Error al reanudar la suscripci\xf3n")}finally{h(null)}};return x?(0,s.jsx)("div",{className:"bg-accent-red/10 border border-accent-red/20 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-accent-red text-sm",children:x})}):(0,s.jsxs)("div",{className:"space-y-3",children:["active"===r&&!n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{N(!0)},disabled:m||"pause"===g,className:"w-full px-4 py-2 text-sm font-medium text-accent-cream bg-accent-cream/10 hover:bg-accent-cream/20 disabled:bg-muted rounded-lg transition-colors border border-accent-cream/20",children:"pause"===g?"Pausando...":"Pausar Suscripci\xf3n"}),(0,s.jsx)("button",{onClick:y,disabled:m||"cancel"===g,className:"w-full px-4 py-2 text-sm font-medium text-accent-red bg-accent-red/10 hover:bg-accent-red/20 disabled:bg-muted disabled:text-muted-foreground rounded-lg transition-colors",children:"cancel"===g?"Cancelando...":"Cancelar Suscripci\xf3n"})]}),n&&(0,s.jsx)("button",{onClick:S,disabled:m||"resume"===g,className:"w-full px-4 py-2 text-sm font-medium text-accent-green bg-accent-green/10 hover:bg-accent-green/20 disabled:bg-muted disabled:text-muted-foreground rounded-lg transition-colors",children:"resume"===g?"Reanudando...":"Reanudar Suscripci\xf3n"}),"trialing"===r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-muted-foreground text-center mb-3",children:[(0,s.jsx)("p",{children:"Tu per\xedodo de prueba est\xe1 activo"}),(0,s.jsx)("p",{className:"text-xs mt-1",children:"Puedes cancelar en cualquier momento sin costo"})]}),(0,s.jsx)("button",{onClick:y,disabled:m||"cancel"===g,className:"w-full px-4 py-2 text-sm font-medium text-accent-red bg-accent-red/10 hover:bg-accent-red/20 disabled:bg-muted disabled:text-muted-foreground rounded-lg transition-colors",children:"cancel"===g?"Cancelando...":"Cancelar Per\xedodo de Prueba"})]}),"canceled"===r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-muted-foreground text-center mb-3",children:[(0,s.jsx)("p",{children:"Tu suscripci\xf3n ha sido cancelada"}),(0,s.jsx)("p",{className:"text-xs mt-1",children:"Puedes reactivar tu suscripci\xf3n en cualquier momento"})]}),(0,s.jsx)("button",{onClick:()=>window.location.href="/pricing",className:"w-full px-4 py-2 text-sm font-medium text-accent-cream bg-nexly-azul hover:bg-nexly-light-blue rounded-lg transition-colors",children:"Reactivar Suscripci\xf3n"}),(0,s.jsx)("button",{onClick:()=>window.location.href="/dashboard/integrations",className:"w-full px-4 py-2 text-sm font-medium text-foreground bg-muted hover:bg-muted/80 rounded-lg transition-colors",children:"Ver Integraciones"})]}),f&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md mx-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"trialing"===r?"Cancelar Per\xedodo de Prueba":"Cancelar Suscripci\xf3n"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"trialing"===r?"\xbfEst\xe1s seguro de que quieres cancelar tu per\xedodo de prueba? No se te cobrar\xe1 nada y perder\xe1s el acceso inmediatamente.":"\xbfEst\xe1s seguro de que quieres cancelar tu suscripci\xf3n? Esta acci\xf3n no se puede deshacer."}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:"Cancelar"}),(0,s.jsx)("button",{onClick:w,disabled:"cancel"===g,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 disabled:opacity-50 rounded-lg",children:"cancel"===g?"Cancelando...":"Confirmar"})]})]})}),j&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md mx-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Pausar Suscripci\xf3n"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"\xbfEst\xe1s seguro de que quieres pausar tu suscripci\xf3n? Podr\xe1s reanudarla m\xe1s tarde."}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsx)("button",{onClick:()=>N(!1),className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:"Cancelar"}),(0,s.jsx)("button",{onClick:k,disabled:"pause"===g,className:"px-4 py-2 text-sm font-medium text-white bg-yellow-600 hover:bg-yellow-700 disabled:opacity-50 rounded-lg",children:"pause"===g?"Pausando...":"Confirmar"})]})]})})]})}var v=r(61575);let j={visa:"https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg",mastercard:"https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg",amex:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/30/American_Express_logo_%282018%29.svg/1200px-American_Express_logo_%282018%29.svg.png",default:"https://cdn-icons-png.flaticon.com/512/179/179457.png"},N=e=>e&&({visa:"visa",mastercard:"mastercard",amex:"amex"})[e.toLowerCase()]||"default",y=e=>(null==e?void 0:e.status)==="active"?"Activa":(null==e?void 0:e.status)==="trialing"?"Prueba Gratuita":(null==e?void 0:e.status)==="paused"?"Pausada":(null==e?void 0:e.status)==="canceled"?"Cancelada":"Desconocida",w=e=>{switch(e){case"active":return"bg-transparent text-accent-green border border-accent-green/30";case"trialing":return"bg-transparent text-accent-blue border border-accent-blue/30";case"paused":return"bg-transparent text-accent-cream border border-accent-cream/30";case"canceled":return"bg-transparent text-accent-red border border-accent-red/30";default:return"bg-transparent text-muted-foreground border border-border"}};function k(){var e,t;let{subscription:r,loading:d,forceRefresh:l}=(0,n.mU)(),{user:u}=(0,i.a)(),{showSuccess:m,showError:x}=(0,o.w)(),{handleOpenPortal:p,loading:h}=c(),[k,S]=(0,a.useState)(!1),[P,C]=(0,a.useState)(null),[E,_]=(0,a.useState)(!0);if((0,a.useEffect)(()=>{let e=async()=>{try{_(!0);let e=await fetch("/api/stripe/subscription-info",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){let t=await e.json();C(t)}else console.error("Error fetching Stripe data:",e.statusText)}catch(e){console.error("Error fetching Stripe data:",e)}finally{_(!1)}};u&&e()},[u]),d||E)return(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)(v.ZP,{size:"lg",text:"Cargando Suscripci\xf3n..."})});let I=null==r?void 0:r.hasSubscription;if(console.log("subscription stripe page",r),!I)return(0,s.jsx)("div",{className:"min-h-screen p-6",style:{background:"var(--background-gradient)"},children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,s.jsxs)("div",{className:"bg-muted border border-border rounded-lg p-8 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-background border border-border rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("span",{className:"text-2xl text-muted-foreground",children:"●"})}),(0,s.jsx)("h2",{className:"text-lg font-medium text-foreground mb-2",children:"Sin Suscripci\xf3n Activa"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm mb-6",children:"No tienes una suscripci\xf3n activa. Elige un plan para comenzar."}),(0,s.jsx)("button",{onClick:()=>{window.location.href="/pricing"},className:"bg-accent-green/20 border border-accent-green/30 text-accent-green hover:bg-accent-green/30 px-6 py-3 rounded-lg font-medium transition-colors",children:"Ver Planes Disponibles"})]})})});let T=r.subscription,M=null==P?void 0:P.subscription,D=null==P?void 0:P.paymentMethod,A=(null==D?void 0:D.card)||{brand:"visa",last4:"4242"},L=N(null==A?void 0:A.brand),z=(null==M?void 0:M.pauseCollection)||(null==T?void 0:T.status)==="paused",O=(null==M?void 0:M.currentPeriodEnd)?new Date(M.currentPeriodEnd).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}):"Fecha no disponible",F=(null==M?void 0:M.amount)?(M.amount/100).toFixed(2):(null==T?void 0:T.planType)==="crecimiento"?"29.99":(null==T?void 0:T.planType)==="pro"?"59.99":"149.99",V=(null==M?void 0:M.status)||(null==T?void 0:T.status);return(0,s.jsx)("div",{className:"min-h-screen p-6",style:{background:"var(--background-gradient)"},children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-lg font-medium text-foreground mb-2",children:"Mi Suscripci\xf3n"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Gestiona tu suscripci\xf3n y m\xe9todo de pago"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)("div",{className:"bg-muted border border-border rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-foreground",children:"Estado de Suscripci\xf3n"}),(0,s.jsx)("div",{className:"px-4 py-2 rounded-full border text-sm font-medium ".concat(w(V)),children:y({...T,status:V})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"ID de Suscripci\xf3n"}),(0,s.jsx)("p",{className:"text-foreground font-mono text-xs mt-1 bg-background px-3 py-2 rounded-md",children:(null==P?void 0:null===(e=P.subscription)||void 0===e?void 0:e.id)||(null===(t=r.subscription)||void 0===t?void 0:t.id)||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Plan"}),(0,s.jsx)("p",{className:"text-sm font-semibold text-foreground mt-1 capitalize",children:(null==T?void 0:T.planType)==="crecimiento"?"Crecimiento":(null==T?void 0:T.planType)==="pro"?"Pro":(null==T?void 0:T.planType)==="business"?"Business":"N/A"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Monto"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-foreground mt-1",children:["$",F,(0,s.jsx)("span",{className:"text-xs font-normal text-muted-foreground ml-1",children:"/mes"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Pr\xf3xima Renovaci\xf3n"}),(0,s.jsx)("p",{className:"text-sm text-foreground mt-1",children:O})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-muted border border-border rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-foreground mb-4",children:"M\xe9todo de Pago"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-12 h-8 bg-background border border-border rounded flex items-center justify-center",children:(0,s.jsx)("img",{src:j[L]||j.default,alt:L,className:"h-6 w-auto"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium text-sm text-foreground",children:["visa"===L?"Visa":"mastercard"===L?"Mastercard":"amex"===L?"American Express":"Tarjeta"," ","terminada en ",(null==A?void 0:A.last4)||"****"]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"M\xe9todo de pago por defecto"})]})]}),(0,s.jsx)("button",{onClick:p,disabled:h,className:"px-3 py-2 text-xs font-medium text-foreground bg-muted hover:bg-muted/80 disabled:bg-muted/50 rounded-md transition-colors border border-border",children:h?"Cargando...":"Cambiar"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-muted border border-border rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-foreground mb-4",children:"Acciones"}),(0,s.jsx)(f,{subscriptionId:(null==T?void 0:T.stripeSubscriptionId)||(null==T?void 0:T.id)||"",status:V,isPaused:z,onStatusChange:()=>{l()}})]}),(0,s.jsxs)("div",{className:"bg-muted border border-border rounded-lg p-6",children:[(0,s.jsx)("h4",{className:"font-medium text-foreground mb-2 text-sm",children:"Informaci\xf3n"}),(0,s.jsxs)("ul",{className:"text-xs text-muted-foreground space-y-2",children:[(0,s.jsx)("li",{children:"• Pausar mantiene tus datos"}),(0,s.jsx)("li",{children:"• Cancelar elimina acceso inmediato"}),(0,s.jsx)("li",{children:"• Puedes reactivar en cualquier momento"}),(0,s.jsx)("li",{children:"• Acceso completo a todas las funciones"})]})]})]}),(0,s.jsx)("div",{className:"lg:col-span-2 mb-8",children:(0,s.jsx)(b,{})}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(g,{})})]})]})})}},61575:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>n});var s=r(57437),a=r(66648);function n(e){let{size:t="md",text:r,fullScreen:n=!1,className:i=""}=e,o={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24"},c={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},d={sm:"border-2",md:"border-[3px]",lg:"border-4",xl:"border-[5px]"},l=()=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 ".concat(i),children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"\n            ".concat(o[t]," \n            ").concat(d[t],"\n            rounded-full \n            border-transparent\n            border-t-nexly-green \n            border-r-nexly-teal\n            animate-spin\n            shadow-nexly-green/30\n          "),style:{animationDuration:"1s",animationTimingFunction:"linear"}}),(0,s.jsx)("div",{className:"\n          ".concat(o[t]," \n          rounded-full \n          absolute top-0 left-0 \n          flex items-center justify-center\n          bg-gradient-to-br from-nexly-green/10 to-nexly-teal/10\n        "),children:(0,s.jsx)(a.default,{src:"/logo_single.png",alt:"Nexly",width:48,height:48,className:"".concat(c[t]," object-contain animate-pulse"),priority:!0})})]}),r&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-accent-cream font-medium text-sm tracking-wide mb-2",children:r}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1.5",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-nexly-green rounded-full animate-bounce shadow-lg shadow-nexly-green/50"}),(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-nexly-teal rounded-full animate-bounce shadow-lg shadow-nexly-teal/50",style:{animationDelay:"0.15s"}}),(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-nexly-green rounded-full animate-bounce shadow-lg shadow-nexly-green/50",style:{animationDelay:"0.3s"}})]})]})]});return n?(0,s.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-neutral-900 via-neutral-800 to-neutral-900 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,s.jsx)(l,{})}):(0,s.jsx)(l,{})}},12104:(e,t,r)=>{"use strict";r.d(t,{f4:()=>d,mU:()=>c,qR:()=>o});var s=r(57437),a=r(2265),n=r(67048);let i=(0,a.createContext)(void 0);function o(e){let{children:t}=e,{token:r}=(0,n.a)(),[o,c]=(0,a.useState)(null),[d,l]=(0,a.useState)(!0),[u,m]=(0,a.useState)(null),x=(0,a.useCallback)(async()=>{if(!r){l(!1);return}try{var e;l(!0),m(null),console.log("\uD83D\uDD04 Fetching subscription status...");let t=await fetch("".concat("https://nexly-production.up.railway.app","/subscriptions/status?t=").concat(Date.now()),{headers:{Authorization:"Bearer ".concat(r),"Cache-Control":"no-cache"}});if(!t.ok)throw Error("Error ".concat(t.status,": ").concat(t.statusText));let s=await t.json();console.log("\uD83D\uDCCA Subscription data received:",s),c(s),s.hasSubscription&&(null===(e=s.subscription)||void 0===e?void 0:e.planType)?(localStorage.setItem("selectedPlan",s.subscription.planType),localStorage.setItem("hasActiveSubscription","true")):(localStorage.removeItem("selectedPlan"),localStorage.removeItem("hasActiveSubscription"))}catch(e){console.error("❌ Error fetching subscription:",e),c({hasSubscription:!1}),m(e instanceof Error?e.message:"Error desconocido"),localStorage.removeItem("hasActiveSubscription")}finally{l(!1)}},[r]);(0,a.useEffect)(()=>{c(null),m(null),l(!0),r?x():l(!1)},[r,x]);let p=(0,a.useMemo)(()=>{var e;if(!o)return{isPaid:!1,isTrial:!1,isFree:!0,active:!1,trialActive:!1,pendingPaymentMethod:!1,paused:!1,cancelled:!1,pastDue:!1,incomplete:!1};let t=o.hasSubscription,r=o.userSubscriptionStatus,s=null===(e=o.subscription)||void 0===e?void 0:e.status,a="active_paid"===r||"active"===s,n="active_trial"===r||"trialing"===s;return{isPaid:!!a,isTrial:!!n,isFree:!(a||n)||!t,active:!!a,trialActive:!!n,pendingPaymentMethod:"trial_pending_payment_method"===r,paused:"paused"===s,cancelled:"canceled"===s,pastDue:"past_due"===s,incomplete:!!("incomplete"===s||"incomplete_expired"===s)}},[o]),b=(0,a.useCallback)(e=>{var t,r;if(!(null==o?void 0:o.hasSubscription))return!1;let s=null===(t=o.subscription)||void 0===t?void 0:t.planType;return!!s&&((null===(r=({crecimiento:["whatsapp","instagram","telegram"],pro:["whatsapp","instagram","messenger","telegram"],business:["whatsapp","instagram","messenger","telegram","tiktok","twitter"]})[s])||void 0===r?void 0:r.includes(e))||!1)},[o]),g=(0,a.useCallback)(()=>{var e;if(!(null==o?void 0:o.hasSubscription))return 0;switch(null===(e=o.subscription)||void 0===e?void 0:e.planType){case"crecimiento":return 3;case"pro":return 4;case"business":return 999;default:return 0}},[o]),h=(0,a.useCallback)(e=>{var t;c(e),m(null),e.hasSubscription&&(null===(t=e.subscription)||void 0===t?void 0:t.planType)&&(localStorage.setItem("selectedPlan",e.subscription.planType),localStorage.setItem("hasActiveSubscription","true"))},[]),f=(0,a.useCallback)(async()=>{console.log("\uD83D\uDD04 Forcing subscription context refresh..."),await x()},[x]),v=(0,a.useMemo)(()=>({subscription:o,loading:d,error:u,status:p,refetch:x,canUseFeature:b,getMaxIntegrations:g,updateAfterPayment:h,forceRefresh:f}),[o,d,u,p,x,b,g,h,f]);return(0,s.jsx)(i.Provider,{value:v,children:t})}function c(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useSubscription must be used within a SubscriptionProvider");return e}function d(){return(0,a.useContext)(i)}},67048:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});var s=r(2265);function a(){let[e,t]=(0,s.useState)(null),[r,a]=(0,s.useState)(null),[n,i]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=localStorage.getItem("token"),r=localStorage.getItem("user");if(e&&r)try{let s=JSON.parse(r);a(e),t(s)}catch(e){localStorage.removeItem("token"),localStorage.removeItem("user")}i(!1)},[]),{user:e,token:r,setAuth:(e,r)=>{a(e),t(r),localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(r))},clear:()=>{a(null),t(null),localStorage.removeItem("token"),localStorage.removeItem("user")},logout:()=>{console.log("\uD83D\uDD04 Logout manual iniciado..."),localStorage.removeItem("token"),localStorage.removeItem("user"),document.cookie="token=; Path=/; Max-Age=0; SameSite=Lax",sessionStorage.clear(),window.location.replace("/login")},isLoading:n,isAuthenticated:!!r&&!!e}}},11870:(e,t,r)=>{"use strict";r.d(t,{w:()=>a});var s=r(2265);function a(){let{showNotification:e}=function(){let[e,t]=(0,s.useState)([]),r=(0,s.useCallback)(e=>{var r;let s=Math.random().toString(36).substr(2,9),n={id:s,duration:null!==(r=e.duration)&&void 0!==r?r:5e3,...e};t(e=>[...e,n]),n.duration&&n.duration>0&&setTimeout(()=>{a(s)},n.duration)},[]),a=(0,s.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]);return{notifications:e,showNotification:r,hideNotification:a,clearAll:(0,s.useCallback)(()=>{t([])},[])}}(),t=(0,s.useCallback)((t,r)=>{e({type:"success",title:t,message:r})},[e]);return{showSuccess:t,showError:(0,s.useCallback)((t,r)=>{e({type:"error",title:t,message:r,duration:0})},[e]),showInfo:(0,s.useCallback)((t,r)=>{e({type:"info",title:t,message:r})},[e]),showWarning:(0,s.useCallback)((t,r)=>{e({type:"warning",title:t,message:r})},[e])}}}},e=>{var t=t=>e(e.s=t);e.O(0,[6648,7130,6215,1744],()=>t(74391)),_N_E=e.O()}]);