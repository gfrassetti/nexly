(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2958],{3841:(e,t,a)=>{Promise.resolve().then(a.bind(a,70151))},16463:(e,t,a)=>{"use strict";var r=a(71169);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},70151:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(57437),n=a(2265),s=a(16463),o=a(12104),i=a(64673),c=a(52686),l=a(27776),d=a(11870),u=a(25164),m=a(67048),g=a(29039);function p(){var e;let[t,a]=(0,n.useState)(""),[p,h]=(0,n.useState)(""),[b,x]=(0,n.useState)({}),v=(0,s.useSearchParams)(),{subscription:f,getMaxIntegrations:y,status:w}=(0,o.mU)(),{createPaymentLink:j}=(0,i.A)(),{integrations:k,isIntegrationAvailable:A,getButtonText:N,getButtonStyle:S,handleIntegrationClick:_,handleDisconnect:C}=function(){let{getMaxIntegrations:e,status:t}=(0,o.mU)(),a=a=>{if(t.pendingPaymentMethod||t.cancelled)return!1;let r=e();return"whatsapp"===a?!t.cancelled:"instagram"===a||"telegram"===a?t.trialActive||t.active||r>=999:!!t.trialActive||!!t.active||r>=999||r>1},r=async(e,t)=>{try{let a=localStorage.getItem("token");if(!a){l.Am.error("No se encontr\xf3 el token de autenticaci\xf3n");return}let r="";if(r="telegram"===e?"/telegram/disconnect":"/integrations/".concat(t),!(await fetch("".concat("https://nexly-production.up.railway.app").concat(r),{method:"telegram"===e?"POST":"DELETE",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}})).ok)throw Error("Error al desconectar la integraci\xf3n");l.Am.success("".concat(e," desconectado exitosamente")),setTimeout(()=>{window.location.reload()},1e3)}catch(t){console.error("Error desconectando integraci\xf3n:",t),l.Am.error("Error al desconectar ".concat(e))}};return{integrations:c.Du,isIntegrationAvailable:a,isIntegrationConnected:e=>!1,getButtonText:(e,t)=>(null==t?void 0:t.some(t=>t.provider===e&&("linked"===t.status||"active"===t.status)))?"Desconectar":a(e)?"whatsapp"===e?"Conectar WhatsApp":"Conectar":"Upgrade para habilitar",getButtonStyle:e=>a(e)?"whatsapp"===e?"w-full bg-nexly-teal text-accent-cream px-4 py-2 rounded hover:bg-nexly-green transition-colors duration-200":"w-full bg-nexly-azul text-accent-cream px-4 py-2 rounded hover:bg-nexly-light-blue transition-colors duration-200":"w-full bg-neutral-600 text-neutral-400 px-4 py-2 rounded cursor-not-allowed transition-colors duration-200",handleIntegrationClick:e=>{"whatsapp"===e?window.location.href="/dashboard/integrations/connect/whatsapp":"instagram"===e?window.location.href="/dashboard/integrations/connect/instagram":"telegram"===e?window.location.href="/dashboard/integrations/connect/telegram":a(e)?l.Am.error("".concat(e," a\xfan no est\xe1 implementado")):window.location.href="/pricing"},handleDisconnect:r}}(),I=async e=>{x(t=>({...t,[e]:!0}));try{_(e)}finally{x(t=>({...t,[e]:!1}))}},E=async(e,t)=>{x(t=>({...t,[e]:!0}));try{await C(e,t),M()}catch(e){console.error("Error en desconexi\xf3n:",e)}finally{x(t=>({...t,[e]:!1}))}},{showSuccess:T,showError:P}=(0,d.w)(),{refreshAll:M}=(0,u.p)(),{token:B}=(0,m.a)(),{data:D,mutate:z}=(0,g.ZP)(B?["/integrations",B]:null,async e=>{let[t,a]=e,r=await fetch("".concat("https://nexly-production.up.railway.app").concat(t),{headers:{Authorization:"Bearer ".concat(a)}});if(!r.ok)throw console.error("Error fetching integrations:",r.status,r.statusText),Error("Error ".concat(r.status,": ").concat(r.statusText));let n=await r.json();return Array.isArray(n)?n:n&&"object"==typeof n?(console.warn("Received single object instead of array, converting:",n),[n]):(console.warn("Received unexpected data type, returning empty array:",n),[])});return(0,n.useEffect)(()=>{let e=v.get("success"),t=v.get("error");if("whatsapp_connected"===e)l.Am.success("\xa1WhatsApp conectado!",{description:"WhatsApp se ha conectado exitosamente"}),a("\xa1WhatsApp conectado exitosamente!"),M();else if("instagram_connected"===e)l.Am.success("\xa1Instagram conectado!",{description:"Instagram se ha conectado exitosamente"}),a("\xa1Instagram conectado exitosamente!"),M();else if("telegram_connected"===e)l.Am.success("\xa1Telegram conectado!",{description:"Telegram se ha conectado exitosamente"}),a("\xa1Telegram conectado exitosamente!"),M();else if(t){let e="Error de conexi\xf3n",a="Error al conectar WhatsApp. Intenta de nuevo.";switch(t){case"oauth_failed":e="Error de autenticaci\xf3n",a="Error al autenticar con Meta. Verifica los logs del servidor para m\xe1s detalles.";break;case"instagram_oauth_failed":e="Error de autenticaci\xf3n de Instagram",a="Error al autenticar con Instagram. Intenta de nuevo.";break;case"no_waba_found":e="Cuenta de WhatsApp Business no encontrada",a="No se encontr\xf3 una cuenta de WhatsApp Business asociada. Aseg\xfarate de tener una cuenta de WhatsApp Business configurada en Meta Business Manager.";break;case"no_instagram_account":e="Cuenta de Instagram Business no encontrada",a="No se encontr\xf3 una cuenta de Instagram Business asociada. Aseg\xfarate de tener una cuenta de Instagram Business conectada a una p\xe1gina de Facebook.";break;case"no_phone_number":e="N\xfamero de tel\xe9fono no encontrado",a="No se encontr\xf3 un n\xfamero de tel\xe9fono asociado a tu cuenta de WhatsApp Business.";break;case"oauth_denied":case"instagram_oauth_denied":e="Autorizaci\xf3n denegada",a="Has denegado los permisos necesarios. Intenta de nuevo y acepta todos los permisos.";break;case"missing_code":case"instagram_missing_code":e="C\xf3digo de autorizaci\xf3n faltante",a="Error en el proceso de autorizaci\xf3n. Intenta de nuevo.";break;case"invalid_state":case"instagram_invalid_state":e="Estado de autorizaci\xf3n inv\xe1lido",a="Error en el proceso de autorizaci\xf3n. Intenta de nuevo.";break;case"instagram_invalid_request":e="Solicitud inv\xe1lida",a="Los par\xe1metros de la solicitud son inv\xe1lidos. Verifica la configuraci\xf3n de la app de Meta.";break;case"instagram_unauthorized":e="No autorizado",a="Las credenciales de la app de Meta son inv\xe1lidas. Verifica META_APP_ID y META_APP_SECRET.";break;case"instagram_invalid_token":e="Token inv\xe1lido",a="El token de acceso es inv\xe1lido o ha expirado. Intenta conectar de nuevo.";break;case"telegram_connection_failed":e="Error de conexi\xf3n de Telegram",a="Error al conectar con Telegram. Intenta de nuevo.";break;case"telegram_missing_parameters":e="Par\xe1metros faltantes",a="Faltan par\xe1metros requeridos para la conexi\xf3n con Telegram.";break;case"telegram_bot_not_configured":e="Bot no configurado",a="El bot de Telegram no est\xe1 configurado correctamente.";break;case"telegram_invalid_signature":e="Firma inv\xe1lida",a="La firma de autenticaci\xf3n de Telegram es inv\xe1lida.";break;case"telegram_missing_state":e="Estado faltante",a="Falta el estado de autorizaci\xf3n para Telegram.";break;case"telegram_invalid_user_id":e="ID de usuario inv\xe1lido",a="El ID de usuario de Telegram es inv\xe1lido.";break;case"telegram_user_not_found":e="Usuario no encontrado",a="No se encontr\xf3 el usuario en la base de datos.";break;default:e="Error desconocido",a="Error: ".concat(t,". Revisa los logs del servidor para m\xe1s detalles.")}l.Am.error(e,{description:a}),h(a)}},[v,T,P,z]),(0,r.jsxs)("div",{className:"p-6 text-foreground",style:{background:"var(--background-gradient)"},children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-lg font-medium text-foreground",children:"Integrations"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Connect your messaging platforms"})]})}),(null==f?void 0:null===(e=f.freeTrial)||void 0===e?void 0:e.isActive)&&(0,r.jsx)("div",{className:"bg-accent-blue/10 border border-accent-blue/20 rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-accent-blue rounded-full mt-2"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-foreground",children:"Available During Trial Period"}),(0,r.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:[(0,r.jsx)("p",{children:"During your free trial, you can connect:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"WhatsApp Business"})," - Manage WhatsApp messages"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Instagram Business"})," - Manage Instagram DMs"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Telegram"})," - Manage Telegram bots and messages"]})]}),(0,r.jsx)("p",{className:"mt-2",children:(0,r.jsx)("a",{href:"/pricing",className:"font-medium text-accent-blue hover:underline",children:"Subscribe to access all integrations"})})]})]})]})}),w.pendingPaymentMethod&&!w.trialActive&&!w.active&&(0,r.jsx)("div",{className:"bg-warning/10 border border-warning/20 rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-warning rounded-full"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-warning font-medium text-sm",children:"M\xe9todo de Pago Pendiente"}),(0,r.jsx)("p",{className:"text-muted-foreground text-xs",children:"Completa tu m\xe9todo de pago para iniciar tu per\xedodo de prueba gratuito de 7 d\xedas"})]})]}),(0,r.jsx)("button",{onClick:()=>j(),className:"bg-warning/20 border border-warning/30 text-warning px-3 py-2 rounded-md text-xs font-medium hover:bg-warning/30 transition-colors",children:"Completar Pago"})]})}),(null==f?void 0:f.subscription)&&(0,r.jsx)("div",{className:"bg-muted/30 border border-border rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-foreground font-medium text-sm",children:["Current plan: ","crecimiento"===f.subscription.planType?"Crecimiento":"Pro"]}),(0,r.jsxs)("p",{className:"text-muted-foreground text-xs",children:["Available integrations: ",999===y()?"All available":"Up to ".concat(y())]})]}),w.pendingPaymentMethod&&!w.trialActive&&!w.active&&(0,r.jsx)("button",{onClick:()=>j(),className:"bg-warning/20 border border-warning/30 text-warning px-3 py-2 rounded-md text-xs font-medium hover:bg-warning/30 transition-colors",children:"Complete Payment"}),!w.active&&!w.trialActive&&!w.pendingPaymentMethod&&(0,r.jsx)("button",{onClick:()=>window.location.href="/pricing",className:"bg-accent-blue/20 border border-accent-blue/30 text-accent-blue px-3 py-2 rounded-md text-xs font-medium hover:bg-accent-blue/30 transition-colors",children:"Upgrade Plan"})]})}),t&&(0,r.jsxs)("div",{className:"bg-success/10 border border-success/20 rounded-lg p-4 mb-4 flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-success rounded-full"}),(0,r.jsx)("p",{className:"text-sm text-foreground",children:t})]}),p&&(0,r.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 mb-4 flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-destructive rounded-full"}),(0,r.jsx)("p",{className:"text-sm text-foreground",children:p})]}),D&&D.filter(e=>"linked"===e.status||"active"===e.status).length>0&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-sm font-medium text-foreground mb-4",children:"Connected Integrations"}),(0,r.jsx)("div",{className:"integrations-status-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.filter(e=>"linked"===e.status||"active"===e.status).map(e=>(0,r.jsxs)("div",{className:"bg-muted/50 border border-border rounded-lg p-4 hover:bg-muted/80 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-md flex items-center justify-center mr-3 ".concat("whatsapp"===e.provider?"bg-accent-green/20":"instagram"===e.provider?"bg-accent-blue/20":"telegram"===e.provider?"bg-blue-400/20":"bg-accent-blue/20"),children:(0,r.jsx)("span",{className:"text-sm font-medium ".concat("whatsapp"===e.provider?"text-accent-green":"instagram"===e.provider?"text-accent-blue":"telegram"===e.provider?"text-blue-400":"text-accent-blue"),children:"whatsapp"===e.provider?"W":"instagram"===e.provider?"I":"telegram"===e.provider?"T":e.provider.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-foreground font-medium text-sm",children:e.name}),(0,r.jsx)("p",{className:"text-muted-foreground text-xs capitalize",children:e.provider})]})]}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-md text-xs font-medium ".concat("linked"===e.status||"active"===e.status?"bg-success/20 text-success":"pending"===e.status?"bg-warning/20 text-warning":"bg-destructive/20 text-destructive"),children:"linked"===e.status||"active"===e.status?"Connected":"pending"===e.status?"Pending":"Error"})})]}),"pending"===e.status&&(0,r.jsx)("p",{className:"text-muted-foreground text-xs",children:"Integration is being configured. This may take a few minutes."}),"error"===e.status&&(0,r.jsx)("p",{className:"text-destructive text-xs",children:"Connection error. Try reconnecting the integration."})]},e._id))})]}),(0,r.jsx)("h2",{className:"text-sm font-medium text-foreground mb-4",children:D&&D.length>0?"Connect More Integrations":"Available Integrations"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(e=>(0,r.jsxs)("div",{className:"bg-muted/30 border border-border rounded-lg p-6 hover:bg-muted/50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-md flex items-center justify-center mr-3 ".concat("whatsapp"===e.id?"bg-accent-green/20":"instagram"===e.id?"bg-accent-blue/20":"telegram"===e.id?"bg-blue-400/20":"bg-accent-blue/20"),children:(0,r.jsx)("span",{className:"text-sm font-medium ".concat("whatsapp"===e.id?"text-accent-green":"instagram"===e.id?"text-accent-blue":"telegram"===e.id?"text-blue-400":"text-accent-blue"),children:e.label.charAt(0)})}),(0,r.jsx)("h2",{className:"text-sm font-medium text-foreground",children:e.label})]}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4 text-xs",children:e.description}),(()=>{let t=null==D?void 0:D.find(t=>t.provider===e.id&&("linked"===t.status||"active"===t.status)),a=N(e.id,D),n="Desconectar"===a,s=b[e.id]||!1;return(0,r.jsxs)("button",{className:"w-full px-3 py-2 rounded-md text-xs font-medium transition-colors flex items-center justify-center gap-2 ".concat(n?"bg-red-600/10 border border-red-600/20 text-red-600 hover:bg-red-600/20":a.includes("Conectar")?"bg-accent-green/10 border border-accent-green/20 text-accent-green hover:bg-accent-green/20":"bg-muted text-muted-foreground cursor-not-allowed"," ").concat(s?"opacity-50 cursor-not-allowed":""),onClick:()=>{n&&t?E(e.id,t._id):I(e.id)},disabled:!A(e.id)&&!n||s,children:[s&&(0,r.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s?n?"Desconectando...":"Conectando...":a]})})()]},e.id))})]})}function h(){return(0,r.jsx)(n.Suspense,{fallback:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Integraciones"}),(0,r.jsx)("div",{children:"Loading..."})]}),children:(0,r.jsx)(p,{})})}},12104:(e,t,a)=>{"use strict";a.d(t,{f4:()=>l,mU:()=>c,qR:()=>i});var r=a(57437),n=a(2265),s=a(67048);let o=(0,n.createContext)(void 0);function i(e){let{children:t}=e,{token:a}=(0,s.a)(),[i,c]=(0,n.useState)(null),[l,d]=(0,n.useState)(!0),[u,m]=(0,n.useState)(null),g=(0,n.useCallback)(async()=>{if(!a){d(!1);return}try{var e;d(!0),m(null),console.log("\uD83D\uDD04 Fetching subscription status...");let t=await fetch("".concat("https://nexly-production.up.railway.app","/subscriptions/status?t=").concat(Date.now()),{headers:{Authorization:"Bearer ".concat(a),"Cache-Control":"no-cache"}});if(!t.ok)throw Error("Error ".concat(t.status,": ").concat(t.statusText));let r=await t.json();console.log("\uD83D\uDCCA Subscription data received:",r),c(r),r.hasSubscription&&(null===(e=r.subscription)||void 0===e?void 0:e.planType)?(localStorage.setItem("selectedPlan",r.subscription.planType),localStorage.setItem("hasActiveSubscription","true")):(localStorage.removeItem("selectedPlan"),localStorage.removeItem("hasActiveSubscription"))}catch(e){console.error("âŒ Error fetching subscription:",e),c({hasSubscription:!1}),m(e instanceof Error?e.message:"Error desconocido"),localStorage.removeItem("hasActiveSubscription")}finally{d(!1)}},[a]);(0,n.useEffect)(()=>{c(null),m(null),d(!0),a?g():d(!1)},[a,g]);let p=(0,n.useMemo)(()=>{var e;if(!i)return{isPaid:!1,isTrial:!1,isFree:!0,active:!1,trialActive:!1,pendingPaymentMethod:!1,paused:!1,cancelled:!1,pastDue:!1,incomplete:!1};let t=i.hasSubscription,a=i.userSubscriptionStatus,r=null===(e=i.subscription)||void 0===e?void 0:e.status,n="active_paid"===a||"active"===r,s="active_trial"===a||"trialing"===r;return{isPaid:!!n,isTrial:!!s,isFree:!(n||s)||!t,active:!!n,trialActive:!!s,pendingPaymentMethod:"trial_pending_payment_method"===a,paused:"paused"===r,cancelled:"canceled"===r,pastDue:"past_due"===r,incomplete:!!("incomplete"===r||"incomplete_expired"===r)}},[i]),h=(0,n.useCallback)(e=>{var t,a;if(!(null==i?void 0:i.hasSubscription))return!1;let r=null===(t=i.subscription)||void 0===t?void 0:t.planType;return!!r&&((null===(a=({crecimiento:["whatsapp","instagram","telegram"],pro:["whatsapp","instagram","messenger","telegram"],business:["whatsapp","instagram","messenger","telegram","tiktok","twitter"]})[r])||void 0===a?void 0:a.includes(e))||!1)},[i]),b=(0,n.useCallback)(()=>{var e;if(!(null==i?void 0:i.hasSubscription))return 0;switch(null===(e=i.subscription)||void 0===e?void 0:e.planType){case"crecimiento":return 3;case"pro":return 4;case"business":return 999;default:return 0}},[i]),x=(0,n.useCallback)(e=>{var t;c(e),m(null),e.hasSubscription&&(null===(t=e.subscription)||void 0===t?void 0:t.planType)&&(localStorage.setItem("selectedPlan",e.subscription.planType),localStorage.setItem("hasActiveSubscription","true"))},[]),v=(0,n.useCallback)(async()=>{console.log("\uD83D\uDD04 Forcing subscription context refresh..."),await g()},[g]),f=(0,n.useMemo)(()=>({subscription:i,loading:l,error:u,status:p,refetch:g,canUseFeature:h,getMaxIntegrations:b,updateAfterPayment:x,forceRefresh:v}),[i,l,u,p,g,h,b,x,v]);return(0,r.jsx)(o.Provider,{value:f,children:t})}function c(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useSubscription must be used within a SubscriptionProvider");return e}function l(){return(0,n.useContext)(o)}},67048:(e,t,a)=>{"use strict";a.d(t,{a:()=>n});var r=a(2265);function n(){let[e,t]=(0,r.useState)(null),[a,n]=(0,r.useState)(null),[s,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=localStorage.getItem("token"),a=localStorage.getItem("user");if(e&&a)try{let r=JSON.parse(a);n(e),t(r)}catch(e){localStorage.removeItem("token"),localStorage.removeItem("user")}o(!1)},[]),{user:e,token:a,setAuth:(e,a)=>{n(e),t(a),localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(a))},clear:()=>{n(null),t(null),localStorage.removeItem("token"),localStorage.removeItem("user")},logout:()=>{console.log("\uD83D\uDD04 Logout manual iniciado..."),localStorage.removeItem("token"),localStorage.removeItem("user"),document.cookie="token=; Path=/; Max-Age=0; SameSite=Lax",sessionStorage.clear(),window.location.replace("/login")},isLoading:s,isAuthenticated:!!a&&!!e}}},25164:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});var r=a(2265),n=a(29039);function s(){let e=(0,r.useCallback)(()=>{(0,n.JG)(e=>Array.isArray(e)&&"/integrations"===e[0]),(0,n.JG)(e=>Array.isArray(e)&&"/contacts"===e[0]),(0,n.JG)(e=>Array.isArray(e)&&"/inbox"===e[0]),(0,n.JG)(e=>Array.isArray(e)&&"/messages"===e[0]),(0,n.JG)(e=>Array.isArray(e)&&"/conversations"===e[0])},[]),t=(0,r.useCallback)(()=>{(0,n.JG)(e=>Array.isArray(e)&&"/integrations"===e[0])},[]),a=(0,r.useCallback)(()=>{(0,n.JG)(e=>Array.isArray(e)&&"/contacts"===e[0])},[]);return{refreshAll:e,refreshIntegrations:t,refreshContacts:a,refreshInbox:(0,r.useCallback)(()=>{(0,n.JG)(e=>Array.isArray(e)&&"/inbox"===e[0])},[]),refreshMessages:(0,r.useCallback)(()=>{(0,n.JG)(e=>Array.isArray(e)&&"/messages"===e[0])},[]),refreshConversations:(0,r.useCallback)(()=>{(0,n.JG)(e=>Array.isArray(e)&&"/conversations"===e[0])},[])}}},11870:(e,t,a)=>{"use strict";a.d(t,{w:()=>n});var r=a(2265);function n(){let{showNotification:e}=function(){let[e,t]=(0,r.useState)([]),a=(0,r.useCallback)(e=>{var a;let r=Math.random().toString(36).substr(2,9),s={id:r,duration:null!==(a=e.duration)&&void 0!==a?a:5e3,...e};t(e=>[...e,s]),s.duration&&s.duration>0&&setTimeout(()=>{n(r)},s.duration)},[]),n=(0,r.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]);return{notifications:e,showNotification:a,hideNotification:n,clearAll:(0,r.useCallback)(()=>{t([])},[])}}(),t=(0,r.useCallback)((t,a)=>{e({type:"success",title:t,message:a})},[e]);return{showSuccess:t,showError:(0,r.useCallback)((t,a)=>{e({type:"error",title:t,message:a,duration:0})},[e]),showInfo:(0,r.useCallback)((t,a)=>{e({type:"info",title:t,message:a})},[e]),showWarning:(0,r.useCallback)((t,a)=>{e({type:"warning",title:t,message:a})},[e])}}},64673:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(2265),n=a(12104);function s(){let[e,t]=(0,r.useState)(!1),a=(0,n.f4)(),s=null==a?void 0:a.subscription;return{createPaymentLink:async e=>{t(!0);try{var a;let t=localStorage.getItem("token");if(!t)return alert("No est\xe1s autenticado"),!1;let r=e||(null==s?void 0:null===(a=s.subscription)||void 0===a?void 0:a.planType),n=await fetch("".concat("https://nexly-production.up.railway.app","/subscriptions/create-payment-link"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({...r&&{planType:r}})}),o=await n.json();if(o.success&&o.paymentUrl)return window.location.href=o.paymentUrl,!0;if(console.error("Error creating payment link:",o.error),429===n.status)return alert("Demasiados intentos de pago. Intenta nuevamente en 15 minutos."),!1;return alert(o.error||"Error al crear el enlace de pago"),!1}catch(e){return console.error("Error creating payment link:",e),(null==e?void 0:e.name)==="TypeError"||((null==e?void 0:e.message)||"").includes("fetch")?alert("Error de conexi\xf3n. Verifica tu internet e intenta nuevamente."):alert("Error inesperado al crear el enlace de pago"),!1}finally{t(!1)}},loading:e,canCreatePayment:(null==s?void 0:s.userSubscriptionStatus)==="trial_pending_payment_method"}}},52686:(e,t,a)=>{"use strict";a.d(t,{Du:()=>n,pD:()=>r});let r=["whatsapp","instagram","messenger","telegram"],n=[{id:"whatsapp",label:"WhatsApp",color:"bg-green-500",description:"Conecta tu cuenta de WhatsApp Business para enviar y recibir mensajes."},{id:"instagram",label:"Instagram",color:"bg-gradient-to-r from-purple-500 to-pink-500",description:"Conecta tu cuenta de Instagram para gestionar mensajes directos."},{id:"messenger",label:"Facebook Messenger",color:"bg-blue-500",description:"Conecta Facebook Messenger para gestionar conversaciones."},{id:"tiktok",label:"TikTok",color:"bg-black",description:"Conecta TikTok para gestionar mensajes y comentarios."},{id:"telegram",label:"Telegram",color:"bg-blue-500",description:"Conecta tu cuenta personal de Telegram para gestionar todos tus chats y mensajes."}]}},e=>{var t=t=>e(e.s=t);e.O(0,[9039,7776,7130,6215,1744],()=>t(3841)),_N_E=e.O()}]);