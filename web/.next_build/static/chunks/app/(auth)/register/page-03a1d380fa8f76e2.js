(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9566],{52683:(e,t,n)=>{Promise.resolve().then(n.bind(n,94934)),Promise.resolve().then(n.bind(n,53508))},16463:(e,t,n)=>{"use strict";var a=n(71169);n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},94934:(e,t,n)=>{"use strict";n.d(t,{default:()=>d});var a=n(57437),r=n(87138),o=n(2265),s=n(16463),c=n(92800),l=n(67048),i=n(70640);function d(){let[e,t]=(0,o.useState)(""),[n,d]=(0,o.useState)(""),[u,m]=(0,o.useState)(""),[g,h]=(0,o.useState)(!1),[x,f]=(0,o.useState)(""),[p,b]=(0,o.useState)(!1),y=(0,s.useRouter)(),v=(0,s.useSearchParams)(),{setAuth:j}=(0,l.a)(),S=async t=>{t.preventDefault(),h(!0),f(""),b(!1);try{let t=v.get("plan"),a=v.get("payment")||"stripe",r=await (0,c.qL)({username:e,email:n,password:u,plan:t||void 0});b(!0),t&&("crecimiento"===t||"pro"===t||"business"===t)&&r.token&&r.user?(localStorage.setItem("selectedPlan",t),localStorage.setItem("selectedPaymentMethod",a),localStorage.setItem("token",r.token),document.cookie="token=".concat(r.token,"; Path=/; SameSite=Lax"),j(r.token,r.user),setTimeout(()=>{window.location.href="/checkout?plan=".concat(t,"&payment=").concat(a,"&token=").concat(r.token)},1e3)):setTimeout(()=>{y.push("/login")},1500)}catch(e){console.error("❌ Registration error:",e),f(e.message||"Error al crear la cuenta")}finally{h(!1)}};return(0,a.jsxs)("div",{className:"w-full max-w-md",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)(i.Z,{size:"md"})}),(0,a.jsx)("h1",{className:"text-lg font-medium text-foreground",children:"Crear cuenta"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm mt-2",children:"\xdanete a Nexly hoy"})]}),(0,a.jsxs)("form",{onSubmit:S,className:"space-y-6 bg-muted border border-border p-8 rounded-lg",children:[p&&(0,a.jsx)("div",{className:"p-3 bg-accent-green/10 border border-accent-green/20 text-accent-green rounded-lg",children:"✅ Cuenta creada exitosamente."}),x&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:x}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-accent-green focus:border-transparent transition-colors",placeholder:"Nombre de usuario",value:e,onChange:e=>t(e.target.value)})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-accent-green focus:border-transparent transition-colors",placeholder:"Email",type:"email",value:n,onChange:e=>d(e.target.value)})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-accent-green focus:border-transparent transition-colors",placeholder:"Contrase\xf1a",type:"password",value:u,onChange:e=>m(e.target.value)})}),(0,a.jsx)("button",{disabled:g||p,className:"w-full bg-accent-green/20 hover:bg-accent-green/30 disabled:bg-muted text-accent-green border border-accent-green/30 hover:border-accent-green/50 font-medium py-3 rounded-lg disabled:opacity-50 transition-colors duration-300",children:g?"Creando cuenta...":p?"\xa1Cuenta creada!":"Registrarse"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("span",{className:"text-muted-foreground text-sm",children:["\xbfYa tienes cuenta?"," "]}),(0,a.jsx)(r.default,{href:"/login",className:"text-accent-green hover:text-accent-green/80 text-sm font-medium transition-colors duration-300",children:"Inicia sesi\xf3n aqu\xed"})]})]})]})}},53508:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var a=n(57437),r=n(2265),o=n(16463),s=n(67048),c=n(61575);function l(e){let{children:t,requireAuth:n=!0}=e,l=(0,o.useRouter)(),{token:i,user:d,clear:u,isLoading:m}=(0,s.a)(),g=!!(i&&d);return((0,r.useEffect)(()=>{if(!m){if(n&&!g){console.log("\uD83D\uDEE1️ AuthGuard - Redirigiendo a login (requiere auth pero no est\xe1 autenticado)"),l.replace("/login");return}if(!n&&g){console.log("\uD83D\uDEE1️ AuthGuard - Redirigiendo a dashboard (est\xe1 autenticado pero en p\xe1gina de auth)"),l.replace("/dashboard");return}console.log("\uD83D\uDEE1️ AuthGuard - Permitiendo acceso")}},[g,m,n,l]),m)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-accent-dark",children:(0,a.jsx)(c.ZP,{size:"lg",text:"Verificando autenticaci\xf3n..."})}):n&&!g||!n&&g?null:(0,a.jsx)(a.Fragment,{children:t})}},61575:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>o});var a=n(57437),r=n(66648);function o(e){let{size:t="md",text:n,fullScreen:o=!1,className:s=""}=e,c={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24"},l={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},i={sm:"border-2",md:"border-[3px]",lg:"border-4",xl:"border-[5px]"},d=()=>(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 ".concat(s),children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"\n            ".concat(c[t]," \n            ").concat(i[t],"\n            rounded-full \n            border-transparent\n            border-t-nexly-green \n            border-r-nexly-teal\n            animate-spin\n            shadow-nexly-green/30\n          "),style:{animationDuration:"1s",animationTimingFunction:"linear"}}),(0,a.jsx)("div",{className:"\n          ".concat(c[t]," \n          rounded-full \n          absolute top-0 left-0 \n          flex items-center justify-center\n          bg-gradient-to-br from-nexly-green/10 to-nexly-teal/10\n        "),children:(0,a.jsx)(r.default,{src:"/logo_single.png",alt:"Nexly",width:48,height:48,className:"".concat(l[t]," object-contain animate-pulse"),priority:!0})})]}),n&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-accent-cream font-medium text-sm tracking-wide mb-2",children:n}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1.5",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-nexly-green rounded-full animate-bounce shadow-lg shadow-nexly-green/50"}),(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-nexly-teal rounded-full animate-bounce shadow-lg shadow-nexly-teal/50",style:{animationDelay:"0.15s"}}),(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-nexly-green rounded-full animate-bounce shadow-lg shadow-nexly-green/50",style:{animationDelay:"0.3s"}})]})]})]});return o?(0,a.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-neutral-900 via-neutral-800 to-neutral-900 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,a.jsx)(d,{})}):(0,a.jsx)(d,{})}},70640:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(57437),r=n(87138);function o(e){let{href:t="/",className:n="",showText:o=!1,textClassName:s="text-xl font-bold",size:c="md"}=e,l=(0,a.jsxs)("div",{className:"flex items-center gap-3 ".concat(n),children:[(0,a.jsx)("div",{className:"".concat({sm:"w-24",md:"w-32",lg:"w-40"}[c]," flex items-center justify-center"),children:(0,a.jsx)("img",{src:"/logo_nexly.png",alt:"Nexly Logo",className:"w-full h-full object-contain"})}),o&&(0,a.jsx)("span",{className:"".concat(s),children:"Nexly"})]});return t?(0,a.jsx)(r.default,{href:t,className:"inline-block hover:opacity-80 transition-opacity duration-300",children:l}):l}},67048:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var a=n(2265);function r(){let[e,t]=(0,a.useState)(null),[n,r]=(0,a.useState)(null),[o,s]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=localStorage.getItem("token"),n=localStorage.getItem("user");if(e&&n)try{let a=JSON.parse(n);r(e),t(a)}catch(e){localStorage.removeItem("token"),localStorage.removeItem("user")}s(!1)},[]),{user:e,token:n,setAuth:(e,n)=>{r(e),t(n),localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(n))},clear:()=>{r(null),t(null),localStorage.removeItem("token"),localStorage.removeItem("user")},logout:()=>{console.log("\uD83D\uDD04 Logout manual iniciado..."),localStorage.removeItem("token"),localStorage.removeItem("user"),document.cookie="token=; Path=/; Max-Age=0; SameSite=Lax",sessionStorage.clear(),window.location.replace("/login")},isLoading:o,isAuthenticated:!!n&&!!e}}},92800:(e,t,n)=>{"use strict";n.d(t,{SC:()=>o,T5:()=>a,ZP:()=>u,aS:()=>l,oJ:()=>d,qL:()=>s,qi:()=>i,x4:()=>c});let a="https://nexly-production.up.railway.app".replace(/\/+$/,""),r=e=>"".concat(a).concat(e.startsWith("/")?e:"/".concat(e));async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=n||function(){if("undefined"==typeof document)return;let e=document.cookie.match(/(?:^|;\s*)token=([^;]+)/);return e?decodeURIComponent(e[1]):void 0}(),o=await fetch(r(e),{...t,headers:{"Content-Type":"application/json",...a?{Authorization:"Bearer ".concat(a)}:{},...t.headers||{}}});if(!o.ok){if(401===o.status)throw console.warn("\uD83D\uDD12 Token expirado detectado en:",e),console.warn("\uD83D\uDCC5 Timestamp:",new Date().toISOString()),localStorage.removeItem("token"),localStorage.removeItem("user"),document.cookie="token=; Path=/; Max-Age=0; SameSite=Lax",sessionStorage.clear(),console.warn("\uD83D\uDE80 Ejecutando logout autom\xe1tico..."),window.location.replace("/login"),Error("Sesi\xf3n expirada. Redirigiendo al login...");let t="HTTP ".concat(o.status);try{let e=await o.json();t=(null==e?void 0:e.message)||(null==e?void 0:e.error)||t}catch(e){}throw Error(t)}if(204!==o.status)return await o.json()}function s(e){return o("/auth/register",{method:"POST",body:JSON.stringify(e)})}function c(e){return o("/contacts/sync",{method:"POST"},e)}function l(e,t){return o("/contacts/sync/provider/".concat(e),{method:"POST"},t)}function i(e,t){let n=localStorage.getItem("token");return o("/ai/analyze",{method:"POST",headers:{"Content-Type":"application/json",...n&&{Authorization:"Bearer ".concat(n)}},body:JSON.stringify({message:e,context:t})})}function d(e,t){let n=localStorage.getItem("token");return o("/ai/generate-response",{method:"POST",headers:{"Content-Type":"application/json",...n&&{Authorization:"Bearer ".concat(n)}},body:JSON.stringify({message:e,businessContext:t})})}let u=o}},e=>{var t=t=>e(e.s=t);e.O(0,[7138,6648,7130,6215,1744],()=>t(52683)),_N_E=e.O()}]);